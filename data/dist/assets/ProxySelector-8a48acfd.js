import{ae as _,K as f,o as r,g as u,b as a,w as l,ai as c,a as h,B as V,e as g,p as d,ah as p,F as m,h as S,A as y,t as x,k as b,j as v,a5 as C,an as k}from"./index-61371d60.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";const H={setup(){const{tm:e}=_("features/settings");return{tm:e}},data(){return{githubProxies:["https://edgeone.gh-proxy.com","https://hk.gh-proxy.com/","https://gh-proxy.com/","https://gh.llkk.cc"],githubProxyRadioControl:"0",selectedGitHubProxy:"",radioValue:"0",loadingTestingConnection:!1,testingProxies:{},proxyStatus:{}}},methods:{async testSingleProxy(e){this.testingProxies[e]=!0;const o=this.githubProxies[e];try{const i=await f.post("/api/stat/test-ghproxy-connection",{proxy_url:o});console.log(i.data),i.status===200?this.proxyStatus[e]={available:!0,latency:Math.round(i.data.data.latency)}:this.proxyStatus[e]={available:!1,latency:0}}catch{this.proxyStatus[e]={available:!1,latency:0}}finally{this.testingProxies[e]=!1}},async testAllProxies(){this.loadingTestingConnection=!0;const e=this.githubProxies.map((o,i)=>this.testSingleProxy(i));await Promise.all(e),this.loadingTestingConnection=!1}},mounted(){this.selectedGitHubProxy=localStorage.getItem("selectedGitHubProxy")||"",this.radioValue=localStorage.getItem("githubProxyRadioValue")||"0",this.githubProxyRadioControl=localStorage.getItem("githubProxyRadioControl")||"0"},watch:{selectedGitHubProxy:function(e,o){e||(e=""),localStorage.setItem("selectedGitHubProxy",e)},radioValue:function(e){localStorage.setItem("githubProxyRadioValue",e),e==="0"&&(this.selectedGitHubProxy="")},githubProxyRadioControl:function(e){localStorage.setItem("githubProxyRadioControl",e),e!=="-1"?this.selectedGitHubProxy=this.githubProxies[e]||"":this.selectedGitHubProxy=""}}},R=y("h5",null,"GitHub 加速",-1),I=y("span",null,"使用 GitHub 加速",-1),T={key:0,style:{"margin-left":"16px"}},B={class:"d-flex align-center"},N={class:"mr-2"},z={key:0};function A(e,o,i,F,t,P){return r(),u(m,null,[R,a(p,{class:"mt-2",modelValue:t.radioValue,"onUpdate:modelValue":o[0]||(o[0]=s=>t.radioValue=s),"hide-details":"true"},{default:l(()=>[a(c,{label:"不使用 GitHub 加速",value:"0"}),a(c,{value:"1"},{label:l(()=>[I,t.radioValue==="1"?(r(),h(V,{key:0,class:"ml-2",onClick:P.testAllProxies,size:"x-small",variant:"tonal",loading:t.loadingTestingConnection},{default:l(()=>[g(" 测试代理连通性 ")]),_:1},8,["onClick","loading"])):d("",!0)]),_:1})]),_:1},8,["modelValue"]),a(k,null,{default:l(()=>[t.radioValue==="1"?(r(),u("div",T,[a(p,{modelValue:t.githubProxyRadioControl,"onUpdate:modelValue":o[2]||(o[2]=s=>t.githubProxyRadioControl=s),class:"mt-2","hide-details":"true"},{default:l(()=>[(r(!0),u(m,null,S(t.githubProxies,(s,n)=>(r(),h(c,{color:"success",key:s,value:n},{label:l(()=>[y("div",B,[y("span",N,x(s),1),t.proxyStatus[n]?(r(),u("div",z,[a(b,{color:t.proxyStatus[n].available?"success":"error",size:"x-small",class:"mr-1"},{default:l(()=>[g(x(t.proxyStatus[n].available?"可用":"不可用"),1)]),_:2},1032,["color"]),t.proxyStatus[n].available?(r(),h(b,{key:0,color:"info",size:"x-small"},{default:l(()=>[g(x(t.proxyStatus[n].latency)+"ms ",1)]),_:2},1024)):d("",!0)])):d("",!0)])]),_:2},1032,["value"]))),128)),a(c,{color:"primary",value:"-1",label:"自定义"},v({_:2},[t.githubProxyRadioControl==="-1"?{name:"label",fn:l(()=>[a(C,{density:"compact",modelValue:t.selectedGitHubProxy,"onUpdate:modelValue":o[1]||(o[1]=s=>t.selectedGitHubProxy=s),variant:"outlined",style:{width:"100vw"},placeholder:"自定义","hide-details":"true"},null,8,["modelValue"])]),key:"0"}:void 0]),1024)]),_:1},8,["modelValue"])])):d("",!0)]),_:1})],64)}const E=G(H,[["render",A]]);export{E as P};
