import{T as R,v as w,x as b,M as k,aQ as C,o as g,g as M,$ as I,a0 as B,A as p,a as L,w as O,aw as A,aX as K,p as N}from"./index-61371d60.js";import{t as S,K as D,c as V,a as H,s as P,n as U}from"./github-9f73710c.js";var x=(d,n,o)=>new Promise((a,s)=>{var v=e=>{try{t(o.next(e))}catch(m){s(m)}},c=e=>{try{t(o.throw(e))}catch(m){s(m)}},t=e=>e.done?a(e.value):Promise.resolve(e.value).then(v,c);t((o=o.apply(d,n)).next())});const W={class:"math-inline__loading",role:"status","aria-live":"polite"},y=S(R({__name:"MathInlineNode",props:{node:{}},setup(d){const n=d,o=w(null),a=w(null);let s=!1,v=0,c=!1,t=null;const e=w(!0),m=D();let r=null;function T(){return x(this,null,function*(){if(!n.node.content||!a.value||c)return;t&&(t.abort(),t=null);const i=++v,u=new AbortController;if(t=u,!s)try{!r&&o.value&&(r=m(o.value)),yield r==null?void 0:r.whenVisible}catch{}V(n.node.content,!1,{timeout:1500,waitTimeout:0,maxRetries:0,signal:u.signal}).then(l=>{c||i!==v||a.value&&(a.value.innerHTML=l,e.value=!1,s=!0)}).catch(l=>x(null,null,function*(){if(c||i!==v||!a.value)return;const f=(l==null?void 0:l.code)||(l==null?void 0:l.name),h=f==="KATEX_DISABLED";if(f==="WORKER_INIT_ERROR"||l!=null&&l.fallbackToRenderer||f===H||f==="WORKER_TIMEOUT"){const E=yield P();if(E){try{const _=E.renderToString(n.node.content,{throwOnError:n.node.loading,displayMode:!1});e.value=!1,a.value.innerHTML=_,s=!0,U(n.node.content,!1,_)}catch{}return}}if(h)return e.value=!1,void(a.value.textContent=n.node.raw);s||(e.value=!h),n.node.loading?h&&(a.value.textContent=n.node.raw):(e.value=!1,a.value.textContent=n.node.raw)}))})}return b(()=>n.node.content,()=>{T()}),k(()=>{T()}),C(()=>{var i;c=!0,t&&(t.abort(),t=null),(i=r==null?void 0:r.destroy)==null||i.call(r),r=null}),(i,u)=>(g(),M("span",{ref_key:"containerEl",ref:o,class:"math-inline-wrapper"},[I(p("span",{ref_key:"mathElement",ref:a,class:"math-inline"},null,512),[[B,!e.value]]),e.value?(g(),L(K,{key:0,name:"table-node-fade"},{default:O(()=>[p("span",W,[A(i.$slots,"loading",{isLoading:e.value},()=>[u[0]||(u[0]=p("span",{class:"math-inline__spinner animate-spin","aria-hidden":"true"},null,-1)),u[1]||(u[1]=p("span",{class:"sr-only"},"Loading",-1))],!0)])]),_:3})):N("",!0)],512))}}),[["__scopeId","data-v-fbd3ae11"]]);y.install=d=>{d.component(y.__name,y)};export{y as default};
